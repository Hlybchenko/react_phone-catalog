(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(49)},37:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),c=a.n(l),o=a(2),s=(a(37),a(12)),i=a.n(s),m=a(14),u=a(19),d=a(20),h=a(7),p=a(8),g=a(10),E=a(9),b=a(11),f=a(13),y="https://mate-academy.github.io/phone-catalogue-static/api",v=function(){return fetch("".concat(y).concat("/phones",".json")).then(function(e){return e.json()}).then(function(e){return e})},N=function(e){return fetch("".concat(y).concat("/phones","/").concat(e,".json")).then(function(e){return e.json()}).then(function(e){return e})},P=function(e){var t=e.phone,a=e.handleIncreasQuantity,n=e.handleDecreasQuantity,l=e.handleDeleteItem;return r.a.createElement("section",{className:"order-content"},r.a.createElement("div",{className:"order-control-block"},r.a.createElement("button",{type:"button",className:"btn btn-control"},r.a.createElement("img",{onClick:n,name:t.name,id:t.id,className:"control-btn-icons",src:"./img/minus-icon.png",alt:"minus-button"})),r.a.createElement("button",{type:"button",className:"btn btn-control"},r.a.createElement("img",{onClick:a,name:t.name,id:t.id,className:"control-btn-icons",src:"./img/add.png",alt:"add-button"})),r.a.createElement("button",{type:"button",className:"btn btn-control"},r.a.createElement("img",{onClick:l,name:t.name,id:t.id,className:"control-btn-icons",src:"./img/Delete.png",alt:"delete-button"}))),r.a.createElement("table",{className:"order-item"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Phone:"),r.a.createElement("th",null,"Quantity:"),r.a.createElement("th",null,"Extra details link:"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement("span",{className:"order-quantity"},t.quantity)),r.a.createElement("td",null,r.a.createElement(o.b,{to:t.link},r.a.createElement("img",{className:"linked-order-photo",src:t.imageUrl,alt:t.name,title:"see phone details again"})))))))},k=function(e){var t=e.orderedPhones,a=e.handleIncreasQuantity,n=e.handleDecreasQuantity,l=e.handleDeleteItem;return r.a.createElement("div",{className:"order-container"},r.a.createElement("div",{className:"order-box"},r.a.createElement("h3",null,"Your order:"),r.a.createElement("div",{className:t.length?"cart-empty hidden":"cart-empty"},r.a.createElement("span",null,"You haven\u2019t chosen anything yet. But it's not too late to fix :)"),r.a.createElement(o.b,{className:"cart-empty-link",to:"/phones"},"Open catalog")),r.a.createElement("ul",{className:"order-list"},t.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(P,{phone:e,orderedPhones:t,handleIncreasQuantity:a,handleDecreasQuantity:n,handleDeleteItem:l}))})),r.a.createElement("section",{className:"order-content"},r.a.createElement(o.b,{to:"/phones"},r.a.createElement("button",{type:"button",className:t.length?"btn btn-buy btn-add-more":"btn btn-buy btn-add-more hidden"},"+ Add more phones +")))),r.a.createElement("div",{className:"order-btn-block"},r.a.createElement("div",{className:"order-total"},t.length>1&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"order-total-text"},"Total phones in cart: "),t.map(function(e){return e.quantity}).reduce(function(e,t){return e+t}))),r.a.createElement("button",{type:"button",className:t.length<1?"btn btn-buy btn-pay hidden":"btn btn-buy btn-pay"},"->> TO PAY <<-")))},x=function(e){var t=e.quantity;return r.a.createElement("header",{className:"header-container"},r.a.createElement("div",{className:"header-logo"},r.a.createElement(o.b,{to:"/"},r.a.createElement("img",{src:"./img/logo.png",alt:"logo_mobile-phones"}))),r.a.createElement("nav",{className:"nav-links"},r.a.createElement("ul",{className:"nav-items"},r.a.createElement(o.c,{to:"/",exact:!0},r.a.createElement("li",{className:"nav-item"},"Home")),r.a.createElement(o.c,{to:{pathname:"/phones",search:""}},r.a.createElement("li",{className:"nav-item"},"Phones")),r.a.createElement(o.c,{to:"/cart"},r.a.createElement("li",{className:"nav-item cart-item"},r.a.createElement("img",{className:"cart-icon",src:t<1?"./img/empty-cart.png":"./img/full-cart.png",alt:"shopping-cart"}))))))},C=function(){return r.a.createElement("footer",{className:"footer-container"},r.a.createElement("div",{className:"footer-info"},r.a.createElement("span",null,"Task: ",r.a.createElement("a",{href:"https://github.com/mate-academy/react_phone-catalog"},"phones catalog")),r.a.createElement("span",null,"Pull request: ",r.a.createElement("a",{href:"https://github.com/mate-academy/react_phone-catalog/pull/1/files?file-filters%5B%5D=.js"},"Hlybchenko"))))},j=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"welcome-container"},r.a.createElement(o.b,{to:"/phones"},r.a.createElement("span",{className:"welcome-text"},"Welcome to demo project - mobile phones store"))))},T=a(31),O=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sweet-loading"},r.a.createElement(T.a,{color:"#0ca2e2aa",loading:this.state.loading}))}}]),t}(n.Component),S=function(e){var t=e.getSortType,a=e.getSearchValue;return r.a.createElement("div",{className:"search-panel"},r.a.createElement("input",{onChange:a,className:"search-field",type:"text",placeholder:"type to search "}),r.a.createElement("select",{onChange:t,className:"search-sort"},r.a.createElement("option",{value:""},"sort type"),r.a.createElement("option",{value:"alphabet"},"Alphabetical"),r.a.createElement("option",{value:"age"},"Newest")))},w=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).contentPerPage=[{label:3},{label:6},{label:10},{label:20}],a.handlePrev=function(){var e=a.props,t=e.page,n=e.perPage;(0,e.togglePagination)(t-1,n)},a.handleNext=function(){var e=a.props,t=e.page,n=e.perPage;(0,e.togglePagination)(t+1,n)},a.handleNum=function(e){var t=a.props,n=t.perPage;(0,t.togglePagination)(+e.target.id,n)},a.toggleContentPerPage=function(e){(0,a.props.togglePagination)(1,+e.target.value)},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.total,n=t.page,l=t.perPage,c=Array.from({length:Math.ceil(a/l)},function(e,t){return t+1});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pagination-box"},1===c.length?r.a.createElement("div",null," "):r.a.createElement("ul",{className:"pagination-panel"},r.a.createElement("li",null,r.a.createElement("button",{className:20===l?"btn btn-pgn prev-next hidden":"btn btn-pgn prev-next",type:"button",disabled:n<=1,onClick:function(){return e.handlePrev()}},"<<")),c.map(function(t,a){return r.a.createElement("li",{className:20===l?"hidden":"",key:t},r.a.createElement("button",{type:"button",className:a+1===n?"btn btn-pgn selected":"btn btn-pgn",id:a+1,onClick:e.handleNum},t))}),r.a.createElement("li",null,r.a.createElement("button",{className:20===l?"btn btn-pgn prev-next hidden":"btn btn-pgn prev-next",type:"button",onClick:this.handleNext,disabled:n>c.length-1},">>"))),r.a.createElement("select",{className:"per-page-select",defaultValue:l,onChange:this.toggleContentPerPage,title:"perPage"},this.contentPerPage.map(function(e){return r.a.createElement("option",{key:e.label,value:e.label},e.label)}))))}}]),t}(n.Component),D=function(e){var t=e.phone,a=e.handleAddToCart,n=t.name,l=t.snippet,c=t.id,s=t.imageUrl;return r.a.createElement("section",{className:"phones-item-info"},r.a.createElement(o.b,{to:"/phones/".concat(c)},r.a.createElement("img",{className:"phones-main-photo",src:s,alt:n})),r.a.createElement("div",{className:"phones-item-text"},r.a.createElement("h3",null,r.a.createElement(o.b,{className:"phones-item-title",to:"/phones/".concat(c)},n)),r.a.createElement("p",null,l)),r.a.createElement("div",{className:"phones-item-add-btn"},r.a.createElement("button",{onClick:a,id:c,className:"add-btn",type:"button"},"ADD TO CART")))},A=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={phones:[],searchValue:"",sortType:"",perPage:20,page:1},a.setSearchValue=function(e){var t=e.target.value.toLowerCase().trim();a.setState({searchValue:t,page:1})},a.setSortType=function(e){var t=e.target.value;a.setState(function(e){return{sortType:t,phones:a.sortBy(e.phones,t),page:1}})},a.handleSearch=function(e,t){return e.filter(function(e){return[e.snippet,e.name].join("").toLowerCase().includes(t)})},a.sortBy=function(e,t){switch(t){case"alphabet":return Object(u.a)(e).sort(function(e,t){return e.name.localeCompare(t.name)});case"age":return Object(u.a)(e).sort(function(e,t){return e.age-t.age});default:return e}},a.togglePagination=function(e,t){return a.setState({page:e,perPage:t})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(i.a.mark(function e(){var t,a,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,a=new URLSearchParams(this.props.location.search),n=a.get("query")||"",r=a.get("sort")||"",this.setState({phones:t,searchValue:n,sortType:r});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=new URLSearchParams,t=this.state,a=t.searchValue,n=t.sortType;""===a&&""===n||(e.append("query",a.toString()),e.append("sort",n.toString()),this.props.history.push({pathname:"/phones/",search:"?".concat(e.toString())}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.phones,n=t.searchValue,l=t.sortType,c=t.page,o=t.perPage,s=this.handleSearch,i=c*o-o,m=c*o,u=(0,this.sortBy)(s(a,n),l),d=u.slice(i,m);return r.a.createElement(r.a.Fragment,null,0===this.props.initialPhones.length?r.a.createElement(O,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{getSearchValue:this.setSearchValue,getSortType:this.setSortType}),r.a.createElement("h2",null,"Phones Page (",i+1,"-",m>u.length?"".concat(u.length):"".concat(m)," of ",u.length,")"),r.a.createElement(w,{page:c,perPage:o,total:u.length,togglePagination:this.togglePagination}),r.a.createElement("ul",{className:"phones-list"},d.map(function(t){return r.a.createElement("li",{key:t.id,className:"phones-item"},r.a.createElement(D,{phone:t,handleAddToCart:e.props.handleAddToCart}))}))))}}]),t}(n.PureComponent),I=function(e){var t=e.extraData,a=e.selectedPhoto,n=e.handleChoosePhoto,l=e.handleAddToCart,c=t.name,o=t.description,s=t.images,i=t.id,m=t.camera,u=t.battery,d=t.hardware,h=t.sizeAndWeight;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"extra-details"},r.a.createElement("div",{className:"extra-details-photo-selected"},r.a.createElement("img",{className:"selected-photo",src:a,alt:a})),r.a.createElement("article",null,r.a.createElement("span",{className:"extra-details-title"},c),r.a.createElement("div",{className:"extra-details-description"},r.a.createElement("span",{className:"extra-details-text"},o),r.a.createElement("ul",{className:"extra-details-photos"},s.map(function(e){return r.a.createElement("li",{key:e},r.a.createElement("img",{onClick:n,className:"extra-details-photos-item",src:e,alt:e,name:e}))}),r.a.createElement("li",{key:"add-to-cart"},r.a.createElement("img",{onClick:l,id:i,className:"extra-details-photos-item extra-details-photos-item-cart-add ",src:"./img/cart-add.png",alt:"add-to-cart",title:"Click for adding to cart ",name:i})))))),r.a.createElement("div",{className:"extra-details-more-details"},r.a.createElement("section",{className:"more-info"},r.a.createElement("h3",null,"Camera"),r.a.createElement("i",null,"features:"),m.features.map(function(e){return r.a.createElement("span",{key:e},e)}),r.a.createElement("p",null,r.a.createElement("i",null,"primary:"),r.a.createElement("span",null,m.primary))),r.a.createElement("section",{className:"more-info"},r.a.createElement("h3",null,"Battery"),r.a.createElement("i",null,"standbyTime:"),r.a.createElement("span",null,u.standbyTime),r.a.createElement("p",null,r.a.createElement("i",null,"talkTime:"),u.talkTime),r.a.createElement("p",null,r.a.createElement("i",null,"type:")),u.type),r.a.createElement("section",{className:"more-info"},r.a.createElement("h3",null,"Hardware"),r.a.createElement("i",null,"audioJack:"),d.audioJack,r.a.createElement("p",null,r.a.createElement("i",null,"cpu:"),d.cpu),r.a.createElement("p",null,r.a.createElement("i",null,"usb:"),d.usb)),r.a.createElement("section",{className:"more-info"},r.a.createElement("h3",null,"Size and Weight"),r.a.createElement("i",null,"dimensions:"),r.a.createElement(r.a.Fragment,null,h.dimensions.map(function(e){return r.a.createElement("span",{key:e},e)})),"weight:",h.weight)))},q=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={extraData:{},selectedPhoto:""},a.handleChoosePhoto=function(e){var t=e.target.name;a.setState({selectedPhoto:t})},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.id,e.next=3,N(t);case 3:a=e.sent,this.setState({extraData:a,selectedPhoto:a.images[0]});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.extraData,a=e.selectedPhoto,n=this.props.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,n===t.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{to:"/phones"},r.a.createElement("button",{className:"btn btn-back",type:"button"},"<<- Back to all phones")),r.a.createElement(o.b,{to:"/cart/"},r.a.createElement("button",{onClick:this.props.handleAddToCart,id:t.id,className:"btn btn-buy",type:"button"},"->> BUY NOW  <<-")),r.a.createElement(I,{extraData:t,selectedPhoto:a,handleChoosePhoto:this.handleChoosePhoto,handleAddToCart:this.props.handleAddToCart})):r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null))))}}]),t}(n.Component),Q=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 Page not found"),r.a.createElement("div",null,r.a.createElement(o.b,{to:"/"},"Return to Home Page")))},L=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={initialPhones:[],orderedPhones:[]},a.getFromLocalStorage=function(){var e=localStorage.getItem("orderedPhones");return JSON.parse(e)||[]},a.saveToLocalStorage=function(){var e=a.state.orderedPhones;localStorage.setItem("orderedPhones",JSON.stringify(e))},a.handleAddToCart=function(e){var t=e.target.id,n="/phones/".concat(t),r=a.state.initialPhones.find(function(e){return e.id===t}),l=Object(d.a)({},r,{quantity:1,link:n});a.state.orderedPhones.some(function(e){return e.id===t})||a.setState(function(e){return{orderedPhones:[].concat(Object(u.a)(e.orderedPhones),[l])}}),setTimeout(function(){return a.saveToLocalStorage()},100)},a.handleIncreasQuantity=function(e){var t=e.target.id;a.setState(function(e){return{orderedPhones:e.orderedPhones.map(function(e){return e.id===t?Object(d.a)({},e,{quantity:e.quantity+1}):e})}}),setTimeout(function(){return a.saveToLocalStorage()},0)},a.handleDecreasQuantity=function(e){var t=e.target.id;a.state.orderedPhones.find(function(e){return e.id===t}).quantity>1&&a.setState(function(e){return{orderedPhones:e.orderedPhones.map(function(e){return e.id===t?Object(d.a)({},e,{quantity:e.quantity-1}):e})}}),setTimeout(function(){return a.saveToLocalStorage()},0)},a.handleDeleteItem=function(e){var t=e.target.id;a.setState(function(e){return{orderedPhones:e.orderedPhones.filter(function(e){return e.id!==t})}}),setTimeout(function(){return a.saveToLocalStorage()},0)},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(i.a.mark(function e(){var t,a,n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,this.setState({initialPhones:t}),a=this.getFromLocalStorage(),this.setState({orderedPhones:a}),setTimeout(function(){return n.saveToLocalStorage()},0);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.orderedPhones.length;return r.a.createElement("div",{className:"phones-catalog"},r.a.createElement(x,{quantity:t}),r.a.createElement("main",{className:"content-container"},r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/",exact:!0,component:j}),r.a.createElement(f.a,{path:"/phones",exact:!0,render:function(t){return r.a.createElement(A,{initialPhones:e.state.initialPhones,handleAddToCart:e.handleAddToCart,location:t.location,history:t.history})}}),r.a.createElement(f.a,{path:"/cart",exact:!0,render:function(){return r.a.createElement(k,{orderedPhones:e.state.orderedPhones,handleIncreasQuantity:e.handleIncreasQuantity,handleDecreasQuantity:e.handleDecreasQuantity,handleDeleteItem:e.handleDeleteItem})}}),r.a.createElement(f.a,{path:"/phones/:id",exact:!0,render:function(t){return r.a.createElement(q,{id:t.match.params.id,handleAddToCart:e.handleAddToCart})}}),r.a.createElement(f.a,{component:Q}))),r.a.createElement(C,null))}}]),t}(n.Component);L.defaultProps={match:{params:{id:""}}},c.a.render(r.a.createElement(o.a,null,r.a.createElement(L,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.04dc3b07.chunk.js.map